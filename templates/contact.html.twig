{% extends 'layout.html.twig' %}

{% block content %}
    <div id="contact">
        <p class="contact-legend">
            {{ translate('Please contact me and I\'ll answer as soon as possible.')  }}
        </p>

        {# Render message if any #}
        {% if errors is defined %}
            <div class="alert alert-danger fade in">
                <a class="close" data-dismiss="alert" href="#" aria-hidden="true">&times;</a>
                <span class="fa fa-times"></span>
                {% if errors is empty %}
                    {{ translate('Something went wrong while sending the email. Try again later.') }}
                {% else %}
                    {{ translate('Information provided is not valid. Review form data and send it again.') }}
                {% endif %}
            </div>
        {% elseif success is defined %}
            <div class="alert alert-success fade in">
                <a class="close" data-dismiss="alert" href="#" aria-hidden="true">&times;</a>
                <span class="fa fa-check"></span>{{ translate('Contact properly sent. Thanks!') }}
            </div>
        {% endif %}

        {% set currentRoute = assemble_url('contact', true) %}
        <form  action="{{ currentRoute }}" name="contactForm" id="contactForm" method="post">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group {{ errors[constant('Acelaya\\Website\\Form\\ContactFilter::NAME')] is defined ? 'has-error' : '' }}">
                        <input type="text" name="{{ constant('Acelaya\\Website\\Form\\ContactFilter::NAME') }}"
                               placeholder="{{ translate('Name') }}" class="form-control" id="name" value="{{ currentData[constant('Acelaya\\Website\\Form\\ContactFilter::NAME')] }}">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group {{ errors[constant('Acelaya\\Website\\Form\\ContactFilter::EMAIL')] is defined ? 'has-error' : '' }}">
                        <input type="email" name="{{ constant('Acelaya\\Website\\Form\\ContactFilter::EMAIL') }}"
                               placeholder="{{ translate('Email') }}" class="form-control" id="email" value="{{ currentData[constant('Acelaya\\Website\\Form\\ContactFilter::EMAIL')] }}">
                    </div>
                </div>
            </div>
            <div class="form-group {{ errors[constant('Acelaya\\Website\\Form\\ContactFilter::SUBJECT')] is defined ? 'has-error' : '' }}">
                <input type="text" name="{{ constant('Acelaya\\Website\\Form\\ContactFilter::SUBJECT') }}"
                       placeholder="{{ translate('Subject') }}" class="form-control" id="subject" value="{{ currentData[constant('Acelaya\\Website\\Form\\ContactFilter::SUBJECT')] }}">
            </div>
            <div class="form-group {{ errors[constant('Acelaya\\Website\\Form\\ContactFilter::COMMENTS')] is defined ? 'has-error' : '' }}">
                <textarea name="{{ constant('Acelaya\\Website\\Form\\ContactFilter::COMMENTS') }}"
                          placeholder="{{ translate('Comments') }}" class="form-control" id="comments" rows="10"
                        >{{ currentData[constant('Acelaya\\Website\\Form\\ContactFilter::COMMENTS')] }}</textarea>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6">
                    {{ recaptcha_input(locale()) }}
                </div>
                <div class="col-lg-8 col-md-6 col-sm-6 text-right">
                    <div class="form-group ">
                        <button type="submit" name="submit" class="btn btn-primary" disabled
                                data-loading-text="{{ translate('Sending...') }}">
                            {{ translate('Submit') }}
                        </button>
                    </div>
                </div>
            </div>
        </form>

        <div class="clearfix"></div>
        <p class="contact-footer">{{
            translate('You can send me an email to %smoc.ayalecordnajela@ordnajela%s if you prefer.') | format(
                '<b class=\'backwards\'>',
                '</b>'
            ) | raw
        }}</p>
    </div>
{% endblock %}
